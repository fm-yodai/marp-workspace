---
skill: create-context
description: デッキのcontext filesを対話形式で作成・更新。プレゼンの目的、対象聴衆、主要メッセージなどを整理し、AI協働に最適なcontextを構築。
tags: [marp, context, presentation, planning]
---

# Context Creator - プレゼンテーションコンテキスト作成ツール

Marpデッキの `context/` ディレクトリ（`background.md`、`notes.md`）を対話形式で作成・更新するスキルです。

## 機能

- **対話的なcontext作成**: 段階的なプロンプトで情報を整理
- **2つの入力モード**:
  - **Quick Mode**: 短い入力で素早く作成
  - **Detailed Mode**: エディタで詳細な情報を入力
- **既存contextの更新**:
  - **Update**: 既存内容に新しい情報を追加（マージ）
  - **Overwrite**: 既存内容を完全に置き換え
  - **Skip**: キャンセル
- **日本語インターフェース**: テンプレートと統一された日本語UI
- **バックアップと復元**: 万が一のエラー時も安全

## 使用方法

### インタラクティブモード（対話形式）

**Claude Codeから実行**:
```
/create-context
```

**npm scriptから実行**:
```bash
npm run create-context
```

### 非インタラクティブモード（自動実行）

AIエージェントやスクリプトから、コマンドライン引数またはJSON設定ファイルで完全自動実行できます。

**基本的な使用**（最小限の引数）:
```bash
npm run create-context -- \
  --deck 2026-01_sample \
  --purpose "新製品の紹介と市場戦略の共有" \
  --audience "経営陣、マーケティングチーム" \
  --key-messages "製品の独自性,市場機会,実装計画" \
  --yes
```

**完全な引数セット**:
```bash
npm run create-context -- \
  --deck 2026-01_sample \
  --purpose "Q1四半期レビューと今後の戦略" \
  --audience "全社員" \
  --key-messages "Q1の成果,課題と改善策,Q2の目標" \
  --time-constraint "45分" \
  --tone business \
  --todos "売上データ収集,グラフ作成,発表練習" \
  --ideas "インタラクティブQ&A,ライブデモ" \
  --references "Q1財務レポート,競合分析資料" \
  --questions "Q2予算配分,新規採用計画" \
  --update-mode update \
  --yes
```

**JSON設定ファイル使用**:
```bash
npm run create-context -- --config ./examples/context-config.json --yes
```

詳細は後述の「非インタラクティブモード」セクションを参照してください。

## プロンプトフロー

```
1. デッキ選択
   ↓
2. 既存contextのチェック
   ├─ なし → モード選択へ
   └─ あり → 更新戦略選択 (Update/Overwrite/Skip)
   ↓
3. モード選択 (Quick/Detailed)
   ↓
4. Background情報の入力
   - 目的
   - 対象聴衆
   - 主要メッセージ
   - 制約条件
   - トーン・スタイル
   ↓
5. Notes情報の入力
   - TODOリスト
   - アイデア
   - 参考資料
   - 質問・検討事項
   ↓
6. プレビューと確認
   ↓
7. ファイル生成
```

## 入力モードの選び方

### Quick Mode
**こんな時に使う**:
- 素早くcontextを作成したい
- 短い情報で十分
- プロトタイプや簡単なプレゼン

**特徴**:
- 1行入力（`input`プロンプト）
- カンマまたは改行区切りでリスト入力
- 最小限の入力で完了

### Detailed Mode
**こんな時に使う**:
- 詳細なcontextが必要
- 長文で説明したい
- 重要なプレゼンテーション

**特徴**:
- エディタ入力（`editor`プロンプト）
- 複数行の自由な記述
- より詳細な情報を整理

## 更新戦略

### Update（推奨）
- 既存の情報を**保持**
- 新しい情報を**追加**
- TODOリストやアイデアをマージ
- 重複を自動除去

**使用例**:
- プレゼンの準備中に新しいアイデアを追加
- TODOリストを更新
- 参考資料を追加

### Overwrite
- 既存の内容を**完全に置き換え**
- すべてを最初から作り直す

**使用例**:
- プレゼンの方向性が大きく変わった
- 完全に新しい内容にしたい

### Skip
- 何もせずに終了
- 既存のcontextをそのまま保持

## 生成されるファイル

### `context/background.md`
```markdown
# プレゼンテーション背景

## 目的
（プレゼンテーションの目的）

## 対象聴衆
（対象聴衆の情報）

## 主要メッセージ
- メッセージ1
- メッセージ2

## 制約条件
（時間、予算、リソースなどの制約）

## トーン・スタイル
（フォーマル/カジュアル/技術的/ビジネス）
```

### `context/notes.md`
```markdown
# プレゼンテーションノート

## TODO
- [ ] TODO項目1
- [ ] TODO項目2

## アイデア
- アイデア1
- アイデア2

## 参考資料
- 参考資料1
- 参考資料2

## 質問・検討事項
- 質問1
- 質問2
```

## ベストプラクティス

### 1. 目的は具体的に
❌ 悪い例: "プレゼンをする"
✅ 良い例: "新製品の特徴を経営陣に説明し、予算承認を得る"

### 2. 対象聴衆を明確に
❌ 悪い例: "みんな"
✅ 良い例: "技術的背景を持つマネージャー層、平均年齢40代、エンジニアリング経験5年以上"

### 3. 主要メッセージは3-5個に絞る
- 多すぎると焦点がぼやける
- 各メッセージは1文で表現
- 優先度順に並べる

### 4. TODOは具体的なアクション
❌ 悪い例: "スライドを作る"
✅ 良い例: "競合分析のグラフを作成（データソース: 市場調査レポート2025）"

### 5. 最初はQuick Mode、後からDetailed Modeで拡充
1. Quick Modeで素早く骨格を作る
2. `/create-context` を再実行
3. Update（マージ）を選択
4. Detailed Modeで詳細を追加

## トラブルシューティング

### エディタが起動しない
**症状**: Detailed Modeでエディタが開かない

**原因**: `$EDITOR` 環境変数が設定されていない

**解決策**:
```bash
# bashの場合
export EDITOR=nano
# または
export EDITOR=vim

# 永続化する場合は ~/.bashrc に追加
echo 'export EDITOR=nano' >> ~/.bashrc
```

### 既存のTODOチェック状態が消える
**症状**: Update時に既存のチェックマークが消える

**原因**: 通常は発生しません（バグの可能性）

**解決策**:
- `.backup` ファイルから復元
- 手動で `notes.md` を修正

### バリデーションエラーが出る
**症状**: "この項目は必須です" や "10文字以上入力してください"

**原因**: 必須項目が未入力、または文字数が不足

**解決策**:
- 目的は最低10文字以上
- 対象聴衆、主要メッセージは必須
- 空白のみの入力は無効

### 日本語が文字化けする
**症状**: 生成されたファイルで日本語が文字化け

**原因**: エディタのエンコーディング設定

**解決策**:
- ファイルを UTF-8 で開く
- エディタのデフォルトエンコーディングを UTF-8 に設定

## 使用例

### ケース1: 新しいデッキでcontextを作成

```bash
$ npm run create-context

🎯 Context Creator - Marpデッキのcontextファイルを作成

? contextを作成するデッキを選択してください: 2026-01_product-launch
? 入力モードを選択してください: Quick Mode - 素早く基本的な情報を入力

📝 情報を入力してください

【Background情報】
? プレゼンテーションの目的を入力してください: 新製品の特徴を経営陣に説明し、予算承認を得る
? 対象聴衆を入力してください（例: 経営陣、技術チーム、新入社員）: 経営陣、プロダクトマネージャー
? 主要メッセージを入力してください（カンマ区切り）: 市場ニーズに応える製品, ROI 150%, 6ヶ月でローンチ可能
? 時間制限を入力してください（任意、例: 30分）: 20分
? トーン・スタイルを選択してください: ビジネス（実務的・効率的）

【Notes情報】
? TODOリストを入力してください（改行またはカンマ区切り）: 競合分析のグラフ作成, 予算の詳細シートを準備, デモビデオを録画
? アイデアを入力してください（任意、改行またはカンマ区切り）: 顧客の声を動画で紹介, 3ヶ月後のロードマップを追加
? 参考資料を入力してください（任意、改行またはカンマ区切り）: 市場調査レポート2025.pdf, 競合製品比較シート

📋 入力内容のプレビュー:

【Background】
目的: 新製品の特徴を経営陣に説明し、予算承認を得る
対象聴衆: 経営陣、プロダクトマネージャー
主要メッセージ: 3件
制約条件: 時間制限: 20分
トーン: ビジネス

【Notes】
TODO: 3件
アイデア: 2件
参考資料: 2件
質問・検討事項: 0件

? この内容でcontextファイルを作成しますか? Yes
✔ contextファイルを生成しました

✅ 完了しました!

生成されたファイル:
  - /home/yodai/marp-workspace/decks/2026-01_product-launch/context/background.md
  - /home/yodai/marp-workspace/decks/2026-01_product-launch/context/notes.md

次のステップ:
  1. 生成されたファイルを確認・編集
  2. Claude Codeでデッキを開き、contextを参照しながらスライドを作成
  3. デッキのプレビュー: cd decks/2026-01_product-launch && npm run dev
```

### ケース2: 既存contextを更新

```bash
$ npm run create-context

🎯 Context Creator - Marpデッキのcontextファイルを作成

? contextを作成するデッキを選択してください: 2026-01_product-launch

📋 既存のcontextファイルが見つかりました

【現在の内容】
目的: 新製品の特徴を経営陣に説明し、予算承認を得る
対象聴衆: 経営陣、プロダクトマネージャー
TODOアイテム: 3件
アイデア: 2件

? 更新方法を選択してください: Update - 既存の内容に新しい情報を追加（マージ）
? 入力モードを選択してください: Quick Mode - 素早く基本的な情報を入力

（以降は新規作成と同様）
```

## 非インタラクティブモード

AIエージェントがユーザーから情報を収集し、自動的にcontextを作成するためのモードです。

### コマンドライン引数

| オプション | 短縮形 | 型 | 必須 | 説明 |
|-----------|--------|-----|------|------|
| `--deck <name>` | `-d` | string | ✓ | 対象デッキ名 |
| `--config <path>` | `-c` | string | - | JSON設定ファイルパス |
| `--purpose <text>` | - | string | ✓* | プレゼンテーションの目的(10文字以上) |
| `--audience <text>` | - | string | ✓* | 対象聴衆 |
| `--key-messages <items>` | `-m` | string | ✓* | 主要メッセージ(カンマ区切り) |
| `--time-constraint <text>` | - | string | - | 時間制限 |
| `--tone <type>` | - | string | - | トーン(formal/casual/technical/business) |
| `--todos <items>` | - | string | - | TODOリスト(カンマ区切り) |
| `--ideas <items>` | - | string | - | アイデア(カンマ区切り) |
| `--references <items>` | - | string | - | 参考資料(カンマ区切り) |
| `--questions <items>` | - | string | - | 質問・検討事項(カンマ区切り) |
| `--update-mode <mode>` | `-u` | string | - | 更新方法(update/overwrite/skip) |
| `--yes` | `-y` | boolean | - | 確認プロンプトをスキップ |

*注: `--config`使用時は不要

### JSON設定ファイルスキーマ

**サンプル** (`examples/context-config.json`):
```json
{
  "deck": "2026-01_sample",
  "updateMode": "update",
  "background": {
    "purpose": "新製品の紹介と市場戦略の共有を通じて、経営陣の承認を得る",
    "audience": "経営陣、マーケティングチーム、製品開発チーム",
    "keyMessages": [
      "製品の独自性と競合優位性",
      "市場機会とターゲット顧客",
      "段階的な実装計画とマイルストーン"
    ],
    "timeConstraint": "30分",
    "tone": "ビジネス"
  },
  "notes": {
    "todos": [
      "市場調査データの最新化",
      "競合分析スライドの作成"
    ],
    "ideas": [
      "製品デモのライブ実施",
      "Q&Aセッションの追加"
    ],
    "references": [
      "市場調査レポート 2026-Q1"
    ],
    "questions": [
      "予算配分の優先順位は?"
    ]
  }
}
```

### バリデーションルール

- **purpose**: 必須、10文字以上
- **audience**: 必須、空でない文字列
- **keyMessages**: 必須、1つ以上の配列
- **tone**: 以下のいずれか
  - 英語: `formal`, `casual`, `technical`, `business`
  - 日本語: `フォーマル`, `カジュアル`, `技術的`, `ビジネス`
- **updateMode**: `update`, `overwrite`, `skip` のいずれか

### エラーメッセージ

**必須引数不足**:
```
❌ エラー: --purpose は必須です

使用方法:
  npm run create-context -- --deck <デッキ名> --purpose <目的> --audience <対象者> --key-messages <メッセージ>

または設定ファイルを使用:
  npm run create-context -- --config ./context-config.json

ヘルプを表示:
  npm run create-context -- --help
```

**バリデーションエラー**:
```
❌ エラー: --purpose: 10文字以上入力してください
```

**デッキが存在しない**:
```
❌ エラー: デッキ "存在しないデッキ" が見つかりません
```

### AIエージェント向けベストプラクティス

1. **情報収集フロー**:
   ```
   ユーザーに質問 → 回答を収集 → コマンド実行
   ```

2. **段階的な質問**:
   ```
   1. プレゼンテーションの目的は何ですか？
   2. 誰が対象聴衆ですか？
   3. 伝えたい主要なメッセージは何ですか？（3-5個）
   4. 時間制限はありますか？
   5. トーンはどのようなスタイルが良いですか？
   6. TODOリストはありますか？
   ```

3. **確認と実行**:
   ```
   収集した情報を表示 → ユーザーに確認 → コマンド実行
   ```

4. **エラーハンドリング**:
   - バリデーションエラーは具体的な修正方法を提示
   - デッキが存在しない場合は、利用可能なデッキをリスト表示

### 使用例

**AIエージェントの対話例**:
```
AI: プレゼンテーションの作成をお手伝いします。いくつか質問させてください。

AI: 1. このプレゼンテーションの目的は何ですか？
User: 新製品の紹介と市場戦略の共有

AI: 2. 誰が対象聴衆ですか？
User: 経営陣とマーケティングチーム

AI: 3. 伝えたい主要なメッセージを3-5個教えてください（カンマ区切り）
User: 製品の独自性、市場機会、実装計画

AI: 4. 時間制限はありますか？（任意）
User: 30分

AI: 5. プレゼンのトーンはどのようなスタイルが良いですか？
     (フォーマル/カジュアル/技術的/ビジネス)
User: ビジネス

AI: 収集した情報を確認します:
    - 目的: 新製品の紹介と市場戦略の共有
    - 対象聴衆: 経営陣とマーケティングチーム
    - 主要メッセージ: 製品の独自性、市場機会、実装計画
    - 時間制限: 30分
    - トーン: ビジネス

AI: この内容でcontextファイルを作成しますか？
User: はい

AI: [コマンド実行]
npm run create-context -- \
  --deck 2026-01_sample \
  --purpose "新製品の紹介と市場戦略の共有" \
  --audience "経営陣とマーケティングチーム" \
  --key-messages "製品の独自性,市場機会,実装計画" \
  --time-constraint "30分" \
  --tone ビジネス \
  --yes

AI: ✅ contextファイルを作成しました！
    次のステップとして、Claude Codeでデッキを開いてスライドを作成できます。
```

## 関連情報

- **Marp公式ドキュメント**: https://marpit.marp.app/
- **プロジェクトドキュメント**: `docs/marp/README.md`
- **デッキ作成ツール**: `/create-deck` または `npm run create-deck`
- **Marpスキル**: `/marp` - Marpの包括的なサポート
- **サンプル設定ファイル**: `examples/context-config.json`

## フィードバック

問題や改善提案がある場合は、GitHubのIssuesでお知らせください。
